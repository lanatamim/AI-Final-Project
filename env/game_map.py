class GameMap:
    """
    Maze loader for Pac-Man.
    # = wall
    . = dot
    P = power pellet
    ' ' (space) = empty
    """

    def __init__(self, width=None, height=None, maze_id=1):
        self.mazes = {
            1: self._maze_simple(),
            2: self._maze_classic(),
            3: self._maze_power(),
            4: self._maze_hard()
        }

        grid_str = self.mazes[maze_id]
        self.grid = self._parse(grid_str)

        self.height = len(self.grid)
        self.width = len(self.grid[0])

        # Start positions (place Pac-Man manually)
        self.start_pos = (1, 1)

        # Ghost starting positions
        self.ghost_starts = [(self.width - 2, self.height - 2)]
        self.ghost_positions = self.ghost_starts[:]

    # ----------------------------
    # Parse the ASCII maze
    # ----------------------------
    def _parse(self, maze_str):
        grid = []
        for line in maze_str.strip().split("\n"):
            row = []
            for ch in line:
                if ch == "#":
                    row.append(1)  # wall
                elif ch == ".":
                    row.append(2)  # dot
                elif ch == "P":
                    row.append(2)  # treat power pellet as dot for now
                else:
                    row.append(0)
            grid.append(row)
        return grid

    # ----------------------------
    # Mazes
    # ----------------------------
    def _maze_simple(self):
        return """
####################
#......##......##..#
#.####.#.####.#....#
#.#....#......#.##.#
#.#.##.######.#....#
#.#.##........#.##.#
#......#######......#
####.#.......#.#####
#....###...###....#.#
#....#.......#....#.#
#....###...###....#.#
####.#.......#.#####
#......#######......#
#.#.##........#.##.#
#.#.##.######.#....#
#.#....#......#.##.#
#.####.#.####.#....#
#......##......##..#
####################
"""

    def _maze_classic(self):
        return """
####################
#........##........#
#.####.#.##.#.####.#
#.#  #.#....#. #.  #
#.#  #.######.# #  #
#......#....#......#
#.####.#.##.#.####.#
#........##........#
#######.####.#######
#.......####.......#
#######.####.#######
#........##........#
#.####.#.##.#.####.#
#......#....#......#
#.#  #.######.# #  #
#.#  #....##....#  #
#.#.####.##.####.#.#
#........##........#
####################
"""

    def _maze_power(self):
        return """
####################
#P......##......P..#
#.####.#.##.#.####.#
#.#....#....#....#.#
#.#.##.######.##.#.#
#......#....#......#
#.####.#.##.#.####.#
#P......####......P#
####.#.......#.#####
#....###P.P###....#.#
#....#.......#....#.#
#.P..###...###..P.#.#
####.#.......#.#####
#......#######......#
#.#.##........#.##.#
#.#.##.######.#....#
#.#....#......#.##.#
#.####.#.####.#....#
#P......##......P..#
####################
"""

    def _maze_hard(self):
        return """
####################
#....#....##....#..#
#.##.#.##.##.##.#.##
#.#..#....##....#.#.#
#.#.####.####.###.#.#
#.....##......##....#
###.#.####.####.#.###
#...#....#....#...#.#
#.###.########.###.##
#.....# P..P #.....#.#
#.###.########.###.##
#...#....#....#...#.#
###.#.####.####.#.###
#.....##......##....#
#.#.####.####.###.#.#
#.#..#....##....#.#.#
#.##.#.##.##.##.#.##
#....#....##....#..#
####################
"""
